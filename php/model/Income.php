<?php	include_once("mysqlManager.php");	include_once("IncomeLengthConverter.php");	class Income{		var $id;		var $value;		var $user_id;		var $income_type_id;		var $income_length_id;		var $start_date;		var $end_date;		var $table_name = "income";		var $deleteFlag;		var $isNew;				function __construct($id){			$this->deleteFlag = false;			if ($id == -1){				$this->isNew = true;				return false;			}			$mysql = new mysqlManager();			$res = $mysql->createSelectQuery(array("id"=>$id), $this->table_name, true);			$row = mysql_fetch_array($res);			if ($row == null){				$this->isNew = true;				return false;			}			$this->id = $id;			$this->value = $row['value'];			$this->user_id = $row['user_id'];			$this->income_type_id = $row['income_type_id'];			$this->income_length_id = $row['income_length_id'];			$this->start_date = $row['start_date'];			$this->end_date = $row['end_date'];						$this->isNew = false;			return true;		}				function delete(){			$mysql = new mysqlManager();			$mysql->createDeleteQuery(array("id"=>$this->id), $this->table_name, true);			$this->isNew = true;		}				function update(){			$params = array("user_id"=>$this->user_id, "income_type_id"=>$this->income_type_id, 				"income_length_id"=>$this->income_length_id, "start_date" =>$this->start_date,				"end_date"=>$this->end_date, "value"=>$this->value);			$mysql = new mysqlManager();			if ($this->isNew){ //insert				$id = $mysql->createInsertQuery($params, $this->table_name, true,true);				if ($mysql->error == null){					$this->id = $id;					$this->isNew = false;					return true;				}				else{					$this->isNew = true;					throw new Exception($mysql->error);					return false;				}			}			else{				$unique = array("id"=>$this->id);				$res = $mysql->createUpdateQuery($unique, $params, $this->table_name, true);				if ($mysql->error == null){					return true;				}				throw new Exception($mysql->error);				return false;			}		}				function getRatio(){			$ilt = new IncomeLengthConverter();			$obj = $ilt->getObject($this->income_length_id);			return $obj['ratio'];		}	}?>